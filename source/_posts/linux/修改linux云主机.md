---
title: 修改linux云主机名称
tags:
- linux
categories:
- linux
---
双十一阿里云活动新用户买云主机享受最低配一年99块钱的优惠，我买了几台，准备搭建各种分布式工具的，这里先记录一下对这几个服务器的操作一遍，记录自己的流程一遍以后必须要再去到处找。
<!-- more -->
# 修改linux主机名称
## 简单方式
修改主机名称在网上有很多介绍，这里使用最简单的`centos7`中有一个命令工具
```shell
# hostnamectl set-hostname 你的主机名称
```
通过这样的方式就可以实现主机名称。但是需要注意的是`访问需要重启才能生效`
## 其他的方式
临时修改主机名称：
```shell
# hostname 名称
```
退出当前会话后，再次登陆就会生效了
永久修改主机名称：
```shell
# vi /etc/sysconfig/netwrok
```
在`vim` 中新增或者就修改一行
```vim
HOSTNAME=主机名称
```
`重启电脑`后就会生效了
## 如何查询自己的主机名称
主机名称可以通过下面命令行查询
```shell
# hostname
```

# 使用ssh登陆云主机
我们知道登陆云主机一般都有两种方式
- ssh 密码登陆
- ssh 密钥登陆

不管是密码或者密钥登陆我们都需要使用远程连接命令行
```shell
# ssh 用户名@ip [-p端口]
```
都需要本地生成ssh本机密钥
```shell
# ssh-keygen -t rsa
```
生成时所有的步骤都跳过
> 这里有个坑 github记录你的每天贡献图的时候 如果没有在ssh生成时写入自己的邮箱，是不会记录自己的贡献值的

然后将自己的ssh公钥复制
```shel
# #在自己本机终端执行
# cat ~/.SSH/id_rsa.pub
```

写入到云主机的~/.ssh/authorized_keys文件中，如果文件中有数据 就在数据下面🏠一行
```shell
# #在云主机终端中执行
# vi ~/.ssh/authorized_keys
```
# 修改远程ssh端口号
为了预防攻击使用ssh公共端口。我们需要将ssh端口改为非常用的
> 阿里云主机有一个坑，阿里云管理平台有一个安全组会管理流量进出的端口。一般都只开放22端口，其他端口都不开。所有修改之后很有可能无法远程登陆。（可以将安全组中的端口设置到最大然后在linux中进行防火墙，也可以将新的ssh端口写入到安全组中便于登陆）

- 1、编辑ssh访问端口文件/etc/ssh/sshd_config
    ```shell
    # vi /etc/ssh/sshd_config
    ```
- 2、查找到Port=22字符，将`#` 号去掉，并且修改后面的22为你想修改为的端口号
- 3、保存后重启
    ```shell
    # service sshd restart
    # 或者
    # /etc/init.d/sshd restart
    ```
- 4、是否可以登陆，不行的话还需要查看linux防火墙的配置

# 总结
这些有可能一次配置需要查找一些资料，因为经常容易忘记，并且一般都是只需要配置一次之后后面都不会再来管他。

但是如果需要配置的时候就特别麻烦，而且找资料也挺麻烦的（很多都过时或者不能达到效果）

所有写下来还是有必要的

# 参考链接🔗

