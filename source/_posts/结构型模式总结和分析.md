---
title: 结构型模式总结和分析
date: 2017-03-24 10:28:32
tags:
	- 设计模式
---
结构型设计模式主要关注的问题是：如何将`类`和`对象`进行组合，以便获得功能更加强大的结构。一般结构型模式都是使用`继承`机制将接口进行组合.
<!--more-->
从程序的结构上解决模块之间的耦合问题。
## 适配器模式（很重要）（adapter）
将一个类的接口转化称客户希望的另外一个接口。适配器使得原来不能一起工作（不兼容）的类，可以一起工作。 就类似于电源适配器一样的模式。

类适配器的灵活性比较差， 对象适配器的灵活性好。

对象适配器：不是通过继承方式，而是通过对象组合方式来进行处理。

类适配器：通过继承的方式来实现，将旧系统的方法进行封装。依赖性变大，膨胀到难以控制。

转换接口，由于应用环境的变化，常常需要将“一些现存的对象”放在新的环境中应用，但是，新环境要求的接口是现存对象所不满足的，此时我们可以通过添加一层Adapter对现有的对象加入一些接口，使其适应新的应用环境。

### 模式结构
### 适用范围
* 当想要使用一个已近存在的类，但是该类的接口不符合现有的需求时。
* 当需要创建一个可以被复用的类，该类能苟与其他无关的类（或者无法遇见的类）协作同时工作。
* 当需要使用一些已近存在的子类，但是不能对所有进行子类化以匹配它们的接口时，对象适配器可以对其父类接口进行适配。


## 桥接模式
定义：将抽象部分与他实现的部分分离，是他们都可以独立的变化。

可以理解为如何进行选课，不同院系 不同课程 相同课程难度等，

什么是抽象类与他的实现类分离: 就是说抽象类和他的派生类用来实现自己的对象。适用于`多重分类`并且每种分类都需要独立变化的情况。

分离接口（抽象）与其实现，当某个类型具有两个或两个以上的纬度变化（或者说是变化点），通过以继承接口的方式隔离变化，以减少因变化带来的代码的修改量。
### 模式结构
### 适用范围
* 当不希望在抽象和他的实现部分之间之间有一个国定的绑定关系。
* 当类的抽象以及它的实现都应该可以通过生成子类的方法加以扩展。
* 当对一个抽象类的实现部分的修改应对客户不参数影响（客户端不要重新编写）。


## 装饰模式
定义： 动态的给一个对像添加一些额外的职责。 `增加功能`方面比生成子类添加更加的灵活。

如果增加的功能相对于整个类来说比较微小时，（功能非核心），最好用装饰模式，做到不改变原有类文件和使用继承的情况下，动态扩展某个对象的功能。

在稳定接口的前提下为对象扩展功能，主要是解决用继承的方式为对象扩展大量功能而造成的子对象数量膨胀的问题
### 模式结构
### 适用范围
* 当需要不影响其他对象的前提下：实现动态、透明地给单个对象添加职责时。
* 当需要将对象的某些职责进行撤销操作时。
* 当不能用生成子类方法进行当前系统扩充时。


## 组合模式
定义： 将对象组合成一个树形结构以表示“整体-部分”的层次结构。使用户对单个对象和组合对象的使用具有一致性。

比如水电气节点 一些节点机构之类的 都可以在代码中使用组合模式 去忽略单体和 单体中的一些分支。 而对他们进行无差别的共性操作。

解决客户程序与复杂对象容器的解耦，一类具有“容器特征”的对象——即他们在充当对象的同时，又是其他对象的容器的情况，通过继承统一的接口，我们可以将容器对象及其子对象看成同一类对象使用，以减少对象使用中的复杂度。
### 模式结构
### 适用范围
* 当开发代码需要表示整体与部分的结构时，
* 当用户需要忽略组合对象和单个对象之间的不同时。


## 享元模式
定义： 运用共享技术有效的支持大量细粒度的对象。

主要是共享了一些常用的或者内存较大的一些对象，让这些对象在整个需要的地方都只用他这个一个。（这种状态）

享元对象是不可改变的。共享的对象 是细粒度的很多地方都会用到它。

主要是解决由于相同对象数量过大而造成系统内存开销过大的问题。实际上是相同的对象引用指向同一个对象空间。在使用Flyweight模式前要做一个评估，如果使用不当会适得其反
### 模式结构
### 适用范围

* 一个对象使用了大量的对象时
* 由于使用大量的对象造成比较巨大的内存开销
* 对象的很多状态都可以改变为外部状态时。（就是把那个状态放到外面进行保存，减少状态的重复加载带来的内存消耗和理解力的降低）
* 使用外部状态后可以用较少的共享对象取代大量对象时。

## 外观模式
定义：为子系统中的一组接口提供一个一致的界面。（就是在系统对外的时候，让一些功能尽量在一个接口去调用，方便外部降低学习成本）

就相当与客户端设置了一个"办事处",这个办事处帮客户端处理跑腿（多个部门跑腿）的事情，让客户端更加的专注于自己的事情。

实现了`依赖倒转` 和 `迪米特`法则的思想

简化接口，对于复杂子系统或子对象调用的封装。从客户程序角度看，只能看见Facade提供的接口。换句话说是对子对象调用的封装，将客户程序对子对象的调用与子对象的变化分离。
### 模式结构
### 适用范围
* 当需要为一个复制的子系统提供几个简单的接口时。
* 当客户端与抽象类的实现部分之间存在着很大的依赖性时。
* 当需要构建一个层次结构的子系统时。（就是把这个层次的一些复杂的东西都封装起来）


## 代理模式
定义： 为其他对象提供一种代理以控制对这个对象的访问。

静态代理 动态代理 glib代理

一般是不建议用代理模式的 因为代理对象和被代理对象是强耦合关系。

解决直接访问某些对象是出现的问题，如：访问远程的对象
### 模式结构
### 适用范围
* 当需要为一个对象在不同的地址空间提供局部的代表时。（这个有点像翻墙）
* 当需要创建开销非常大的对象时。
* 当需要控制对被代理对象的访问权限时（加一个权限判断）。
* 当需要在访问对象时执行一些附加操作时。（比如统计他的访问次数等等）。

## 总结
结构型模式 就是为解决一些复杂的类于类之间，对象与对象，对象与类之间的特殊关系，提供的一种设计思想。运用这些思想可以解决很多复制的逻辑问题，和使代码更加的合理 便于理解。

