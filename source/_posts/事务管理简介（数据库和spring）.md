---
title: 事务管理简介（数据库和spring）
date: 2017-05-16 10:06:32
tags:
	- 事务
---
> 文章摘自《从零开始写Java框架》的事务管理简介部分，感觉还不错，做个笔记


## 什么是事务（Transaction）
事务：就是做一个任务，要么全部做完，要么都不做，不会存在做一半留一半的情况。

事务的4个性质（ACID）
* 原子性（Atomicity） 事务是不可分割的整体
* 一致性（Consistency） 执行数据库操作后，数据必须不会被破坏
* 隔离性（Isolation）保证多线程操作下，对数据保存没有干扰（或者干扰小）
* 持久性（Durability）数据永久的存储在数据库中

四个性质的关系：原子性是基础；隔离性是手段；持久性的目的；一致性是老大（其他都为数据传输的一致性负责）。
### 事务隔离级别

* Read_uncommited;未提交可读：允许脏读，也就是可能读取到其他会话中未提交事务修改的数据（数据库一般都不会用，而且任何操作都不会加锁，这里就不讨论了。）
* Read_commited;已提交可读：只能读取到已经提交的数据。Oracle等多数数据库默认都是该级别 (不重复读)。（数据的读取都是不加锁的，但是数据的写入、修改和删除是需要加锁的）
* Repeatable_read;可重复读：可重复读。在同一个事务内的查询都是事务开始时刻一致的，InnoDB默认级别，mysql默认。在SQL标准中，该隔离级别消除了不可重复读，但是还存在幻读。可重读这个概念是一事务的多个实例在并发读取数据时，会看到同样的数据行。不可重读：事务B修改id=1的数据提交之后，事务A同样的查询，后一次和前一次的结果不一样。
* SeriaLizable;可串行化：完全串行化的读，每次读都需要获得表级共享锁，读写相互都会阻塞。读加共享锁，写加排他锁，读写互斥，使用的悲观锁的理论，实现简单，数据更加安全，但是并发能力非常差。


## 事务面临的问题


